(()=>{"use strict";const e=document.querySelectorAll(".tabs__nav-btn"),t=document.querySelectorAll(".tabs__item");e.forEach((function(n){n.addEventListener("click",(()=>{let o=n,a=o.getAttribute("data-tab"),c=document.querySelector(a),r=`4TH - ${o.innerText}`;o.classList.contains("active")||(e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.remove("active")})),o.classList.add("active"),c.classList.add("active"),document.title=r)}))})),document.querySelectorAll(".tabs__nav-btn")[0].click();const n=document.querySelector(".result__outputs"),o=document.querySelector(".tab-calculator__form"),a=document.querySelectorAll(".datepicker__input")[0],c=document.querySelectorAll(".datepicker__input")[1],r=document.getElementById("checkbox_1"),l=document.querySelector(".input-from__checkbox .checkbox__inner"),s=document.getElementById("checkbox_2"),i=document.querySelector(".input-to__checkbox .checkbox__inner"),d=document.querySelectorAll('.presets__radio input[name="radio-p"]'),u=document.querySelectorAll('.allow__radio input[name="radio-allow"]'),m=document.querySelector('.actions__item[data-preset="month"]'),p=document.querySelector('.actions__item[data-preset="week"]'),_=JSON.parse(localStorage.getItem("savedObjects"))||[],v=document.querySelector(".results"),y=document.querySelector(".results__list"),f=document.querySelector(".result__clear"),h=10;let g=!1;function S(){a.value&&c.value&&b(event)}function E(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}function L(e){const t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}.${n}.${t}`}function D(e){const t=e.target;let n;t===r?n=l:t===s&&(n=i),n.textContent=t.checked?"Includes":"No includes"}function b(e){e.preventDefault(),n.style.transform="scale(1)";let t=new Date(a.value),o=new Date(c.value);if(r.checked&&(t=new Date(t),t.setDate(t.getDate()+1)),s.checked&&(o=new Date(o),o.setDate(o.getDate()+1)),isNaN(t)||isNaN(o))return void(n.innerText="no date entered!");let l=o-t,i=Math.abs(l/864e5);const d=document.querySelector('.presets__radio input[name="radio-p"]:checked'),u=document.querySelector('.allow__radio input[name="radio-allow"]:checked');let m="d";if(d&&"p_radio_2"===d.id?(i*=24,m="h"):d&&"p_radio_3"===d.id?(i*=1440,m="min"):d&&"p_radio_4"===d.id&&(i*=86400,m="s"),u&&"a_radio_1"===u.id){const e=Math.ceil(i);i-=function(e,t){let n=0;for(let o=0;o<t;o++){const t=new Date(e.getTime()+24*o*60*60*1e3).getDay();0!==t&&6!==t||n++}return n}(t,e)}else if(u&&"a_radio_2"===u.id){const e=Math.ceil(i);i-=function(e,t){let n=0;for(let o=0;o<t;o++){const t=new Date(e.getTime()+24*o*60*60*1e3).getDay();t>=1&&t<=5&&n++}return n}(t,e)}if(isNaN(i))n.innerText="no date entered";else{const e=i.toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ");n.innerText=`= ${e} ${m}`;_.find((n=>n.start===L(t)&&n.end===L(o)&&n.content===`${e} ${m}`))||A(L(t),L(o),`${e} ${m}`)}}function w(e){a.value&&c.value&&b(e)}function A(e,t,o){v.style.display="block",n.style.transform="scale(1)";const a=document.createElement("li");a.classList.add("results__item","item-results");const c=document.createElement("div");c.classList.add("item-results__start"),c.textContent=e;const r=document.createElement("div");r.classList.add("item-results__end"),r.textContent=t;const l=document.createElement("div");l.classList.add("item-results__content"),l.textContent=o,y.prepend(a),a.append(c),a.append(r),a.append(l),function(e){function t(t){return new Promise((n=>{e.style.border=t,setTimeout((()=>{e.style.border="",n()}),300)}))}async function n(){await t("#CCEFD2 1px solid"),await t(""),await t("#CCEFD2 1px solid")}n()}(a);const s=JSON.parse(localStorage.getItem("savedObjects"))||[];s.find((n=>n.start===e&&n.end===t&&n.content===o))||(s.unshift({start:e,end:t,content:o}),s.length>h&&s.pop(),localStorage.setItem("savedObjects",JSON.stringify(s)))}l.textContent=r.checked?"includes":"no includes",i.textContent=s.checked?"includes":"no includes",n.innerText="no date entered!",o.addEventListener("submit",b),r.addEventListener("change",D),s.addEventListener("change",D),r.addEventListener("change",S),s.addEventListener("change",S),d.forEach((e=>{e.addEventListener("change",w)})),u.forEach((e=>{e.addEventListener("change",w)})),f.addEventListener("click",(function(e){e.preventDefault(),y.textContent="",n.innerText="enter dates!",n.style.transform="scale(2)",v.style.display="none",_.length=0,localStorage.removeItem("savedObjects"),a.value="",c.value=""})),m&&p&&(m.addEventListener("click",(e=>{if(e.preventDefault(),a.value&&!c.value){const t=new Date(a.value);t.setMonth(t.getMonth()+1),c.value=E(t),b(e)}else if(c.value&&!a.value){const t=new Date(c.value);t.setMonth(t.getMonth()+1),a.value=E(t),b(e)}})),p.addEventListener("click",(e=>{if(e.preventDefault(),c.value&&!a.value){const t=new Date(c.value);t.setDate(t.getDate()+7),a.value=E(t),b(e)}else if(a.value&&!c.value){const t=new Date(a.value);t.setDate(t.getDate()+7),c.value=E(t),b(e)}}))),v.style.display="none","none"===v.style.display&&(n.style.transform="scale(2)"),window.addEventListener("DOMContentLoaded",(()=>{(JSON.parse(localStorage.getItem("savedObjects"))||[]).forEach((e=>{A(e.start,e.end,e.content)})),g=!0})),window.addEventListener("beforeunload",(()=>{localStorage.setItem("itemsLoaded",JSON.stringify(g))})),document.addEventListener("DOMContentLoaded",(function(){const e="f3ndXepmP15fIXlrybfXBOERiOlBdyVM",t=document.querySelector(".select-region"),n=document.querySelector(".select-year"),o=document.querySelector(".outputs__list"),a=document.querySelector(".action__button"),c=document.querySelector(".tab-holidays__null"),r=document.querySelector(".outputs__titles"),l=document.querySelector(".outputs__title._icon-arrow");function s(){c.classList.remove("active"),r.style.display="grid";const a=t.value,l=n.value;fetch(`https://calendarific.com/api/v2/holidays?api_key=${e}&country=${a}&year=${l}`).then((e=>e.json())).then((e=>{const t=e.response.holidays;o.innerHTML="";let n=0;t.forEach((e=>{const t=document.createElement("li");t.className="outputs__item item-outputs",t.innerHTML=`\n            <div class="item-outputs__date">${function(e){e.getFullYear();const t=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}.${t}`}(new Date(e.date.iso))}</div>\n            <div class="item-outputs__content">${e.name}</div>\n          `,o.appendChild(t),n++})),console.log(n)})).catch((e=>{console.error("Error when receiving holidays:",e)}))}c.classList.add("active"),r.style.display="none",l.addEventListener("click",(()=>{l.classList.toggle("active");const e=Array.from(o.querySelectorAll(".outputs__item"));e.reverse(),e.forEach((e=>o.appendChild(e)))})),a.addEventListener("click",(e=>{e.preventDefault(),s()})),t.addEventListener("change",s),n.addEventListener("change",s);const i=document.querySelector(".title-date");let d=!0;i.addEventListener("click",(()=>{const e=Array.from(o.querySelectorAll(".outputs__item"));e.sort(((e,t)=>{const n=new Date(e.querySelector(".item-outputs__date").textContent),o=new Date(t.querySelector(".item-outputs__date").textContent);return d?n-o:o-n})),d=!d,e.forEach((e=>o.appendChild(e)))})),fetch(`https://calendarific.com/api/v2/countries?api_key=${e}`).then((e=>e.json())).then((e=>{const o=e.response.countries;t.innerHTML="",o.forEach((e=>{const n=document.createElement("option");n.className="select-region__option",n.value=e["iso-3166"],n.textContent=e.country_name,t.appendChild(n)})),n.removeAttribute("disabled")})).catch((e=>{console.error("Помилка при отриманні списку країн:",e)})),function(){const e=(new Date).getFullYear();for(let t=2001;t<=2049;t++){const o=document.createElement("option");o.value=t,o.textContent=t,t===e&&(o.selected=!0),n.appendChild(o)}}()})),function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();
