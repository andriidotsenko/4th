(()=>{"use strict";const e=document.querySelectorAll(".tabs__nav-btn"),t=document.querySelectorAll(".tabs__item");e.forEach((function(n){n.addEventListener("click",(()=>{let a=n,o=a.getAttribute("data-tab"),c=document.querySelector(o),l=`4TH - ${a.innerText}`;a.classList.contains("active")||(e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.remove("active")})),a.classList.add("active"),c.classList.add("active"),document.title=l)}))})),e[0].click();const n=document.querySelector(".result__outputs"),a=document.querySelector(".tab-calculator__form"),o=document.querySelectorAll(".datepicker__input")[0],c=document.querySelectorAll(".datepicker__input")[1],l=document.getElementById("checkbox_1"),r=document.querySelector(".input-from__checkbox .checkbox__inner"),s=document.getElementById("checkbox_2"),i=document.querySelector(".input-to__checkbox .checkbox__inner"),d=document.querySelectorAll('.presets__radio input[name="radio-p"]'),u=document.querySelectorAll('.allow__radio input[name="radio-allow"]'),m=document.querySelector('.actions__item[data-preset="month"]'),v=document.querySelector('.actions__item[data-preset="week"]'),p=JSON.parse(localStorage.getItem("savedObjects"))||[],_=document.querySelector(".results"),y=document.querySelector(".results__list"),f=document.querySelector(".result__clear"),h=10;let g=!1;function S(){o.value&&c.value&&b(event)}function E(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}function L(e){const t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}.${n}.${t}`}function w(e){const t=e.target;let n;t===l?n=r:t===s&&(n=i),n.textContent=t.checked?"Includes":"No includes"}function b(e){e.preventDefault(),n.style.transform="scale(1)";let t=new Date(o.value),a=new Date(c.value);if(isNaN(t)||isNaN(a))return void(n.innerText="No date entered!");if(t.getTime()===a.getTime())return void(n.innerText="Dates are the same!");let r=a-t,i=Math.abs(r/864e5);const d=document.querySelector('.presets__radio input[name="radio-p"]:checked'),u=document.querySelector('.allow__radio input[name="radio-allow"]:checked');let m="d";if(l.checked||s.checked||(i-=1),l.checked&&s.checked&&(i+=1),d&&"p_radio_2"===d.id?(i*=24,m="h"):d&&"p_radio_3"===d.id?(i*=1440,m="min"):d&&"p_radio_4"===d.id&&(i*=86400,m="s"),u&&"a_radio_1"===u.id){const e=Math.ceil(i);i-=function(e,t){let n=0;for(let a=0;a<t;a++){const t=new Date(e.getTime()+24*a*60*60*1e3).getDay();0!==t&&6!==t||n++}return n}(t,e)}else if(u&&"a_radio_2"===u.id){const e=Math.ceil(i);i-=function(e,t){let n=0;for(let a=0;a<t;a++){const t=new Date(e.getTime()+24*a*60*60*1e3).getDay();t>=1&&t<=5&&n++}return n}(t,e)}if(isNaN(i))n.innerText="No date entered";else{const e=i.toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g," ");n.innerText=`= ${e} ${m}`;p.find((n=>n.start===L(t)&&n.end===L(a)&&n.content===`${e} ${m}`))||k(L(t),L(a),`${e} ${m}`)}}function D(e){o.value&&c.value&&b(e)}function k(e,t,a){_.style.display="block",n.style.transform="scale(1)";const o=document.createElement("li");o.classList.add("results__item","item-results");const c=document.createElement("div");c.classList.add("item-results__start"),c.textContent=e;const l=document.createElement("div");l.classList.add("item-results__end"),l.textContent=t;const r=document.createElement("div");r.classList.add("item-results__content"),r.textContent=a,y.prepend(o),o.append(c),o.append(l),o.append(r),function(e){function t(t){return new Promise((n=>{e.style.border=t,setTimeout((()=>{e.style.border="",n()}),300)}))}async function n(){await t("#885eca 1px solid"),await t(""),await t("#885eca 1px solid")}n()}(o);const s=JSON.parse(localStorage.getItem("savedObjects"))||[];s.find((n=>n.start===e&&n.end===t&&n.content===a))||(s.unshift({start:e,end:t,content:a}),s.length>h&&s.pop(),localStorage.setItem("savedObjects",JSON.stringify(s)))}r.textContent=l.checked?"includes":"no includes",i.textContent=s.checked?"includes":"no includes",n.innerText="enter dates!",a.addEventListener("submit",b),l.addEventListener("change",w),s.addEventListener("change",w),l.addEventListener("change",S),s.addEventListener("change",S),d.forEach((e=>{e.addEventListener("change",D)})),u.forEach((e=>{e.addEventListener("change",D)})),f.addEventListener("click",(function(e){e.preventDefault(),y.textContent="",n.innerText="enter dates!",n.style.transform="scale(1.3)",_.style.display="none",p.length=0,localStorage.removeItem("savedObjects"),o.value="",c.value=""})),m&&v&&(m.addEventListener("click",(e=>{if(e.preventDefault(),o.value&&!c.value){const t=new Date(o.value);t.setMonth(t.getMonth()+1),c.value=E(t),b(e)}else if(c.value&&!o.value){const t=new Date(c.value);t.setMonth(t.getMonth()+1),o.value=E(t),b(e)}else if(c.value&&o.value&&c.value>o.value){const t=new Date(c.value);t.setMonth(t.getMonth()+1),c.value=E(t),b(e)}else if(c.value&&o.value&&c.value<o.value){const t=new Date(o.value);t.setMonth(t.getMonth()+1),o.value=E(t),b(e)}})),v.addEventListener("click",(e=>{if(e.preventDefault(),c.value&&!o.value){const t=new Date(c.value);t.setDate(t.getDate()+7),o.value=E(t),b(e)}else if(o.value&&!c.value){const t=new Date(o.value);t.setDate(t.getDate()+7),c.value=E(t),b(e)}else if(c.value&&o.value&&c.value>o.value){const t=new Date(c.value);t.setDate(t.getDate()+7),c.value=E(t),b(e)}else if(c.value&&o.value&&c.value<o.value){const t=new Date(o.value);t.setDate(t.getDate()+7),o.value=E(t),b(e)}}))),_.style.display="none","none"===_.style.display&&(n.style.transform="scale(1.3)"),window.addEventListener("DOMContentLoaded",(()=>{(JSON.parse(localStorage.getItem("savedObjects"))||[]).forEach((e=>{k(e.start,e.end,e.content)})),g=!0})),window.addEventListener("beforeunload",(()=>{localStorage.setItem("itemsLoaded",JSON.stringify(g))})),e[1].addEventListener("click",(()=>{const e=document.querySelector(".error-message"),t="g2Y2TP5X06108CNQJQVsmyPa1Dt52BEH",n=document.querySelector(".select-region"),a=document.querySelector(".select-year"),o=document.querySelector(".outputs__list"),c=document.querySelector(".action__button"),l=document.querySelector(".tab-holidays__null"),r=document.querySelector(".outputs__titles"),s=document.querySelector(".outputs__title._icon-arrow");function i(){l.classList.remove("active"),r.style.display="grid";const c=n.value,s=a.value;fetch(`https://calendarific.com/api/v2/holidays?api_key=${t}&country=${c}&year=${s}`).then((e=>{if(!e.ok)throw new Error("Помилка запиту до сервера");return e.json()})).then((t=>{const n=t.response.holidays;o.innerHTML="";let a=0;n.forEach((e=>{const t=document.createElement("li");t.className="outputs__item item-outputs",t.innerHTML=`\n\t\t\t\t\t\t<div class="item-outputs__date">${function(e){e.getFullYear();const t=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}.${t}`}(new Date(e.date.iso))}</div>\n\t\t\t\t\t\t<div class="item-outputs__content">${e.name}</div>\n\t\t\t\t\t`,o.appendChild(t),a++})),console.log(a),e.style.display="none"})).catch((t=>{console.error("Error when receiving holidays:",t),e.style.display="flex",l.classList.add("active"),r.style.display="none"}))}o.textContent="",l.classList.add("active"),r.style.display="none",s.addEventListener("click",(()=>{s.classList.toggle("active");const e=Array.from(o.querySelectorAll(".outputs__item"));e.reverse(),e.forEach((e=>o.appendChild(e)))})),c.addEventListener("click",(e=>{e.preventDefault(),i()}));const d=document.querySelector(".title-date");let u=!0;d.addEventListener("click",(()=>{const e=Array.from(o.querySelectorAll(".outputs__item"));e.sort(((e,t)=>{const n=new Date(e.querySelector(".item-outputs__date").textContent),a=new Date(t.querySelector(".item-outputs__date").textContent);return u?n-a:a-n})),u=!u,e.forEach((e=>o.appendChild(e)))})),fetch(`https://calendarific.com/api/v2/countries?api_key=${t}`).then((e=>e.json())).then((e=>{const t=e.response.countries;n.innerHTML="",t.forEach((e=>{const t=document.createElement("option");t.className="select-region__option",t.value=e["iso-3166"],t.textContent=e.country_name,n.appendChild(t)})),n.addEventListener("change",(()=>{""!==n.value?a.removeAttribute("disabled"):a.setAttribute("disabled","true"),i()}))})).catch((e=>{console.error("Помилка при отриманні списку країн:",e)})),function(){const e=(new Date).getFullYear();for(let t=2001;t<=2049;t++){const n=document.createElement("option");n.value=t,n.textContent=t,t===e&&(n.selected=!0),a.appendChild(n)}a.setAttribute("disabled","true")}()})),function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();
